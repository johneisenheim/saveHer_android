function PreviewRectangle(){var e=require("ui/handheld/ui_elements/Preview"),t=new e,i=null,a=require("external/Listeners"),o=new a,r=require("ui/handheld/pages/StoredNoGPSMap"),n=null,s=Ti.UI.createView({width:"95%",height:185,backgroundColor:"transparent",layout:"vertical",bubbleParent:!1,top:20}),l=Ti.UI.createView({width:"100%",height:183,backgroundColor:"#ffffff",layout:"vertical",borderColor:"#DCDCDC",borderWidth:.4,top:0}),c=Ti.UI.createView({width:"100%",height:2,backgroundColor:"#DBDBDB"}),u=Ti.UI.createView({height:.5,width:"97%",backgroundColor:"#DCDCDC",top:10}),d=Ti.UI.createView({width:"100%",height:40,top:5}),f=Ti.UI.createView({backgroundColor:"#ffffff",backgroundImage:"/images/ic_airplane.png",width:30,height:30,left:"20%"}),h=Ti.UI.createView({backgroundColor:"#ffffff",backgroundImage:"/images/ic_icon_5066.png",width:30,height:30,right:"20%"}),p=Ti.UI.createView({height:40,width:.5,backgroundColor:"#DCDCDC",left:"50%"}),m=Titanium.UI.createLabel({text:"",font:{fontSize:15,fontFamily:"Lato-Italic"},color:"#65686D",textAlign:"center",width:Ti.UI.SIZE,top:5});return d.add(f),d.add(p),d.add(h),f.addEventListener("click",function(){if(null!=i&&!saveHer.stopExecution){saveHer.stopExecution=!0,m.text="Attendi...";var e=Titanium.Filesystem.getFile(i+"/date.json");Ti.API.info(e.getNativePath());var a=JSON.parse(e.read());if(""==a.latitude&&""==a.longitude){var s=new r;s.openWin(m,i,a,t,n,i)}else{if(!Titanium.Network.getOnline()){{Ti.UI.createAlertDialog({message:"Sembra che il tuo dispositivo non sia connesso ad una rete. Riprova, per piacere.",ok:"Ok",title:"saveHer"}).show()}return void(m.text="")}o.sendRestoredReport(m,i,a,t,n,i)}}}),h.addEventListener("click",function(){if(null!=i&&!saveHer.stopExecution){saveHer.stopExecution=!0,m.text="Attendi...";var e=Titanium.Filesystem.getFile(i);e.deleteDirectory(!0)?(m.text="Fatto",n.reloadCombo(),t.resetReport(),setTimeout(function(){m.text="",saveHer.stopExecution=!1},2e3)):(m.text="Riprova!",n.reloadCombo(),t.resetReport(),setTimeout(function(){m.text="",saveHer.stopExecution=!1},2e3))}}),s.setCurrentPath=function(e){i=e},s.setLabelStatus=function(e){e.text=e},s.setReport=function(e){t.setReport(e)},s.resetReport=function(){t.resetReport(),i=null},s.setCustomCombo=function(e){n=e},Ti.App.addEventListener("report_complete",function(){m.text=""}),l.add(t),l.add(m),l.add(u),l.add(d),s.add(l),s.add(c),s}module.exports=PreviewRectangle;