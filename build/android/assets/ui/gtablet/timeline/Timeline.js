function Timeline(){var e=Ti.Filesystem.getFile("appdata://","timeline.json"),t=require("ui/tablet/timeline/LoadingRow"),i=require("ui/tablet/timeline/Row1"),a=require("ui/tablet/timeline/Row2"),o=require("ui/tablet/timeline/Row3"),n=require("ui/tablet/timeline/Row4"),r=require("ui/tablet/timeline/Row5"),s=new i,l=new a,c=new o,u=new n,d=new r,f=Ti.UI.createView({width:"90%",height:411,backgroundColor:"transparent",layout:"vertical",top:40}),h=Ti.UI.createView({width:"100%",height:408,backgroundColor:"#ffffff",layout:"vertical",borderColor:"#DCDCDC",borderWidth:.4,top:0}),p=Ti.UI.createView({width:"100%",height:3,backgroundColor:"#DBDBDB"}),m=(Ti.UI.createView({height:.5,width:"100%",backgroundColor:"#E6E6E6",top:5}),Ti.UI.createView({height:.5,width:"100%",backgroundColor:"#E6E6E6",top:0})),g=Ti.UI.createView({height:.5,width:"100%",backgroundColor:"#E6E6E6",top:0}),T=Ti.UI.createView({height:.5,width:"100%",backgroundColor:"#E6E6E6",top:0}),v=Ti.UI.createView({height:.5,width:"100%",backgroundColor:"#E6E6E6",top:0}),_=(Ti.UI.createView({height:.5,width:"100%",backgroundColor:"#E6E6E6",top:0}),Titanium.Network.createHTTPClient({onload:function(){var t=null;try{t=JSON.parse(this.responseText)}catch(i){b.text="Errore recupero!"}if(t.recovered===!1)return void(b.text="Nessuna attività da visualizzare.");var a=[],o=0;for(o=0;o<t.length;o++)switch(Ti.API.info(t[o].nickname),a.push({nickname:t[o].nickname}),o){case 0:s.setNickname(t[o].nickname);break;case 1:l.setNickname(t[o].nickname);break;case 2:c.setNickname(t[o].nickname);break;case 3:u.setNickname(t[o].nickname);break;case 4:d.setNickname(t[o].nickname)}var n=JSON.stringify(a);if(e.write(n),4>=o){Ti.API.info(o);for(var r=0,f=o;5>f;f++)r+=36.5;switch(h.remove(w),s.setAllRowsTop(r),o){case 1:h.add(s);break;case 2:h.add(s),h.add(g),h.add(l);break;case 3:h.add(s),h.add(g),h.add(l),h.add(T),h.add(c);break;case 4:h.add(s),h.add(g),h.add(l),h.add(T),h.add(c),h.add(v),h.add(u)}}else h.remove(w),h.add(s),h.add(m),h.add(l),h.add(g),h.add(c),h.add(T),h.add(u),h.add(v),h.add(d)},onerror:function(){b.text="Errore recupero!"}}));f.startConnection=function(){try{if(Ti.Network.getOnline())try{_.open("GET","http://www.appsaveheritage.com/site_getLastFiveReports.php"),_.send()}catch(t){b.text="Errore recupero!"}else if(e.exists()){Ti.API.info(e.read());var i=JSON.parse(e.read());if(i.recovered===!1)return void(b.text="Nessuna attività da visualizzare.");var a=0;for(a=0;a<i.length;a++)switch(a){case 0:s.setNickname(i[a].nickname);break;case 1:l.setNickname(i[a].nickname);break;case 2:c.setNickname(i[a].nickname);break;case 3:u.setNickname(i[a].nickname);break;case 4:d.setNickname(i[a].nickname)}if(4>=a){for(var o=0,n=a;5>n;n++)o+=36.5;switch(h.remove(w),s.setAllRowsTop(o),a){case 1:h.add(s);break;case 2:h.add(s),h.add(g),h.add(l);break;case 3:h.add(s),h.add(g),h.add(l),h.add(T),h.add(c);break;case 4:h.add(s),h.add(g),h.add(l),h.add(T),h.add(c),h.add(v),h.add(u)}}else h.remove(w),h.add(s),h.add(m),h.add(l),h.add(g),h.add(c),h.add(T),h.add(u),h.add(v),h.add(d)}else b.text="Non riesco a recuperare gli elementi."}catch(t){b.text="Errore recupero!"}};var w=Titanium.UI.createView({width:"100%",height:"100%",backgroundColor:"#ffffff"}),b=Ti.UI.createLabel({text:"Carico...",font:{fontSize:18,fontFamily:"Lato-Italic"},color:"#75787B",textAlign:"center",width:Ti.UI.SIZE});return w.add(b),h.add(new t),h.add(w),f.add(h),f.add(p),f}module.exports=Timeline;