function NoGPSMap(){var e=null,t=!1,i=null,r=!1;Ti.Platform.Android.API_LEVEL<=10?t=!0:e=require("ti.map");var n=null,a=null,o=null,s=null,l=Titanium.UI.createWindow({width:"100%",heigth:"100%",title:""});if(!t){var u=e.isGooglePlayServicesAvailable();switch(u){case e.SUCCESS:Ti.API.info("Google Play services is installed.");break;case e.SERVICE_MISSING:alert("Google Play services is missing. Please install Google Play services from the Google Play store.");break;case e.SERVICE_VERSION_UPDATE_REQUIRED:alert("Google Play services is out of date. Please update Google Play services.");break;case e.SERVICE_DISABLED:alert("Google Play services is disabled. Please enable Google Play services.");break;case e.SERVICE_INVALID:alert("Google Play services cannot be authenticated. Reinstall Google Play services.");break;default:alert("Unknown error.")}}l.activity.onCreateOptionsMenu=function(e){l.activity.actionBar,e.menu},l.addEventListener("androidback",function(){var e=Titanium.Android.currentActivity;e.finish(),l.close()});var c=(Titanium.UI.createView({backgroundColor:"#f6f6f6",width:"100%",height:"100%",layout:"vertical"}),Ti.UI.createView({backgroundColor:"#f8f8f8",width:"100%",height:"100%",layout:"horizontal"})),d=Ti.UI.createSwitch({style:Ti.UI.Android.SWITCH_STYLE_CHECKBOX,title:"Non mostrare più.",top:0,left:0});c.add(d);var h=Ti.UI.createAlertDialog({message:"Scegli la tua posizione attuale. Fai uno zoom il più preciso possibile tramite i tasti + e -, e tieni premuto a lungo per posizionare il pin.",ok:"Ok",title:"saveHer",androidView:c});if(h.addEventListener("click",function(){d.getValue()&&Titanium.App.Properties.setInt("showMapDialog",1)}),t){var f=require("/ui/pages/WebMap");i=new f}else{var p=e.createAnnotation({title:"La tua posizione",draggable:!0,animate:!0,showInfoWindow:!0,isAdded:!1});i=e.createView({mapType:e.NORMAL_TYPE,width:"100%",height:"100%",animate:!0,regionFit:!1,userLocation:!1}),i.addEventListener("longclick",function(e){Ti.API.info("lat:"+e.latitude+", lon:"+e.longitude),p.latitude=e.latitude,p.longitude=e.longitude,o=e.latitude,s=e.longitude,i.addAnnotation(p),p.isAdded=!0,n.setVisible(!0)})}return l.openWin=function(e,t,i,r){l.open(),e.remove(t),i.enabled=!0,a=r;var n=Titanium.App.Properties.getInt("showMapDialog");switch(n){case 0:h.show();break;case 1:break;default:h.show()}},l.openWin2=function(e,t,i,n){l.open(),e.remove(t),n.enabled=!0,a=i,r=!0;var o=Titanium.App.Properties.getInt("showMapDialog");switch(o){case 0:h.show();break;case 1:break;default:h.show()}},Ti.App.addEventListener("web_map_pin",function(e){o=e.coords.k,s=e.coords.B,n.setVisible(!0),Ti.API.info(o+","+s)}),l.add(i),l}module.exports=NoGPSMap;