function hex_sha1(e){return binb2hex(core_sha1(str2binb(e),e.length*chrsz))}function b64_sha1(e){return binb2b64(core_sha1(str2binb(e),e.length*chrsz))}function str_sha1(e){return binb2str(core_sha1(str2binb(e),e.length*chrsz))}function hex_hmac_sha1(e,t){return binb2hex(core_hmac_sha1(e,t))}function b64_hmac_sha1(e,t){return binb2b64(core_hmac_sha1(e,t))}function str_hmac_sha1(e,t){return binb2str(core_hmac_sha1(e,t))}function sha1_vm_test(){return"a9993e364706816aba3e25717850c26c9cd0d89d"==hex_sha1("abc")}function core_sha1(e,t){e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;for(var n=Array(80),r=1732584193,i=-271733879,a=-1732584194,o=271733878,s=-1009589776,u=0;u<e.length;u+=16){for(var l=r,c=i,d=a,h=o,f=s,p=0;80>p;p++){n[p]=16>p?e[u+p]:rol(n[p-3]^n[p-8]^n[p-14]^n[p-16],1);var m=safe_add(safe_add(rol(r,5),sha1_ft(p,i,a,o)),safe_add(safe_add(s,n[p]),sha1_kt(p)));s=o,o=a,a=rol(i,30),i=r,r=m}r=safe_add(r,l),i=safe_add(i,c),a=safe_add(a,d),o=safe_add(o,h),s=safe_add(s,f)}return Array(r,i,a,o,s)}function sha1_ft(e,t,n,r){return 20>e?t&n|~t&r:40>e?t^n^r:60>e?t&n|t&r|n&r:t^n^r}function sha1_kt(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}function core_hmac_sha1(e,t){var n=str2binb(e);n.length>16&&(n=core_sha1(n,e.length*chrsz));for(var r=Array(16),i=Array(16),a=0;16>a;a++)r[a]=909522486^n[a],i[a]=1549556828^n[a];var o=core_sha1(r.concat(str2binb(t)),512+t.length*chrsz);return core_sha1(i.concat(o),672)}function safe_add(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function rol(e,t){return e<<t|e>>>32-t}function str2binb(e){for(var t=Array(),n=(1<<chrsz)-1,r=0;r<e.length*chrsz;r+=chrsz)t[r>>5]|=(e.charCodeAt(r/chrsz)&n)<<32-chrsz-r%32;return t}function binb2str(e){for(var t="",n=(1<<chrsz)-1,r=0;r<32*e.length;r+=chrsz)t+=String.fromCharCode(e[r>>5]>>>32-chrsz-r%32&n);return t}function binb2hex(e){for(var t=hexcase?"0123456789ABCDEF":"0123456789abcdef",n="",r=0;r<4*e.length;r++)n+=t.charAt(e[r>>2]>>8*(3-r%4)+4&15)+t.charAt(e[r>>2]>>8*(3-r%4)&15);return n}function binb2b64(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",r=0;r<4*e.length;r+=3)for(var i=(e[r>>2]>>8*(3-r%4)&255)<<16|(e[r+1>>2]>>8*(3-(r+1)%4)&255)<<8|e[r+2>>2]>>8*(3-(r+2)%4)&255,a=0;4>a;a++)n+=8*r+6*a>32*e.length?b64pad:t.charAt(i>>6*(3-a)&63);return n}var hexcase=0,b64pad="",chrsz=8,OAuth;null==OAuth&&(OAuth={}),OAuth.setProperties=function(e,t){if(null!=e&&null!=t)for(var n in t)e[n]=t[n];return e},OAuth.setProperties(OAuth,{percentEncode:function(e){if(null==e)return"";if(e instanceof Array){for(var t="",n=0;n<e.length;++e)""!=t&&(t+="&"),t+=OAuth.percentEncode(e[n]);return t}return e=encodeURIComponent(e),e=e.replace(/\!/g,"%21"),e=e.replace(/\*/g,"%2A"),e=e.replace(/\'/g,"%27"),e=e.replace(/\(/g,"%28"),e=e.replace(/\)/g,"%29")},decodePercent:function(e){return null!=e&&(e=e.replace(/\+/g," ")),decodeURIComponent(e)},getParameterList:function(e){if(null==e)return[];if("object"!=typeof e)return OAuth.decodeForm(e+"");if(e instanceof Array)return e;var t=[];for(var n in e)t.push([n,e[n]]);return t},getParameterMap:function(e){if(null==e)return{};if("object"!=typeof e)return OAuth.getParameterMap(OAuth.decodeForm(e+""));if(e instanceof Array){for(var t={},n=0;n<e.length;++n){var r=e[n][0];void 0===t[r]&&(t[r]=e[n][1])}return t}return e},getParameter:function(e,t){if(e instanceof Array){for(var n=0;n<e.length;++n)if(e[n][0]==t)return e[n][1];return null}return OAuth.getParameterMap(e)[t]},formEncode:function(e){for(var t="",n=OAuth.getParameterList(e),r=0;r<n.length;++r){var i=n[r][1];null==i&&(i=""),""!=t&&(t+="&"),t+=OAuth.percentEncode(n[r][0])+"="+OAuth.percentEncode(i)}return t},decodeForm:function(e){for(var t=[],n=e.split("&"),r=0;r<n.length;++r){var i=n[r];if(""!=i){var a,o,s=i.indexOf("=");0>s?(a=OAuth.decodePercent(i),o=null):(a=OAuth.decodePercent(i.substring(0,s)),o=OAuth.decodePercent(i.substring(s+1))),t.push([a,o])}}return t},setParameter:function(e,t,n){var r=e.parameters;if(r instanceof Array){for(var i=0;i<r.length;++i)r[i][0]==t&&(void 0===n?r.splice(i,1):(r[i][1]=n,n=void 0));void 0!==n&&r.push([t,n])}else r=OAuth.getParameterMap(r),r[t]=n,e.parameters=r},setParameters:function(e,t){for(var n=OAuth.getParameterList(t),r=0;r<n.length;++r)OAuth.setParameter(e,n[r][0],n[r][1])},completeRequest:function(e,t){null==e.method&&(e.method="GET");var n=OAuth.getParameterMap(e.parameters);null==n.oauth_consumer_key&&OAuth.setParameter(e,"oauth_consumer_key",t.consumerKey||""),null==n.oauth_token&&null!=t.token&&OAuth.setParameter(e,"oauth_token",t.token),null==n.oauth_version&&OAuth.setParameter(e,"oauth_version","1.0"),null==n.oauth_timestamp&&OAuth.setParameter(e,"oauth_timestamp",OAuth.timestamp()),null==n.oauth_nonce&&OAuth.setParameter(e,"oauth_nonce",OAuth.nonce(6)),OAuth.SignatureMethod.sign(e,t)},setTimestampAndNonce:function(e){OAuth.setParameter(e,"oauth_timestamp",OAuth.timestamp()),OAuth.setParameter(e,"oauth_nonce",OAuth.nonce(6))},addToURL:function(e,t){if(newURL=e,null!=t){var n=OAuth.formEncode(t);if(n.length>0){var r=e.indexOf("?");newURL+=0>r?"?":"&",newURL+=n}}return newURL},getAuthorizationHeader:function(e,t){for(var n="OAuth ",r=OAuth.getParameterList(t),i=0;i<r.length;++i){var a=r[i],o=a[0];0==o.indexOf("oauth_")&&(n+=OAuth.percentEncode(o)+'="'+OAuth.percentEncode(a[1])+'"'),i!=r.length-1&&(n+=", ")}return n},correctTimestampFromSrc:function(e){e=e||"oauth_timestamp";var t=document.getElementsByTagName("script");if(null!=t&&t.length){var n=t[t.length-1].src;if(n){var r=n.indexOf("?");if(!(0>r)){parameters=OAuth.getParameterMap(OAuth.decodeForm(n.substring(r+1)));var i=parameters[e];null!=i&&OAuth.correctTimestamp(i)}}}},correctTimestamp:function(e){OAuth.timeCorrectionMsec=1e3*e-(new Date).getTime()},timeCorrectionMsec:0,timestamp:function(){var e=(new Date).getTime()+OAuth.timeCorrectionMsec;return""+Math.floor(e/1e3)},nonce:function(e){for(var t=OAuth.nonce.CHARS,n="",r=0;e>r;++r){var i=Math.floor(Math.random()*t.length);n+=t.substring(i,i+1)}return n}}),OAuth.nonce.CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",OAuth.declareClass=function(e,t,n){var r=e[t];if(e[t]=n,null!=n&&null!=r)for(var i in r)"prototype"!=i&&(n[i]=r[i]);return n},OAuth.declareClass(OAuth,"SignatureMethod",function(){}),OAuth.setProperties(OAuth.SignatureMethod.prototype,{sign:function(e){var t=OAuth.SignatureMethod.getBaseString(e),n=this.getSignature(t);return Ti.API.info("basestring "+t),OAuth.setParameter(e,"oauth_signature",n),n},initialize:function(e,t){var n;n=null!=t.accessorSecret&&e.length>9&&"-Accessor"==e.substring(e.length-9)?t.accessorSecret:t.consumerSecret,this.key=OAuth.percentEncode(n)+"&"+OAuth.percentEncode(t.tokenSecret)}}),OAuth.setProperties(OAuth.SignatureMethod,{sign:function(e,t){var n=OAuth.getParameterMap(e.parameters).oauth_signature_method;(null==n||""==n)&&(n="HMAC-SHA1",OAuth.setParameter(e,"oauth_signature_method",n)),OAuth.SignatureMethod.newMethod(n,t).sign(e)},newMethod:function(e,t){var n=OAuth.SignatureMethod.REGISTERED[e];if(null!=n){var r=new n;return r.initialize(e,t),r}var i=new Error("signature_method_rejected"),a="";for(var o in OAuth.SignatureMethod.REGISTERED)""!=a&&(a+="&"),a+=OAuth.percentEncode(o);throw i.oauth_acceptable_signature_methods=a,i},REGISTERED:{},registerMethodClass:function(e,t){for(var n=0;n<e.length;++n)OAuth.SignatureMethod.REGISTERED[e[n]]=t},makeSubclass:function(e){var t=OAuth.SignatureMethod,n=function(){t.call(this)};return n.prototype=new t,n.prototype.getSignature=e,n.prototype.constructor=n,n},getBaseString:function(e){var t,n=e.action,r=n.indexOf("?");if(0>r)t=e.parameters;else{t=OAuth.decodeForm(n.substring(r+1));for(var i=OAuth.getParameterList(e.parameters),a=0;a<i.length;++a)t.push(i[a])}return OAuth.percentEncode(e.method.toUpperCase())+"&"+OAuth.percentEncode(OAuth.SignatureMethod.normalizeUrl(n))+"&"+OAuth.percentEncode(OAuth.SignatureMethod.normalizeParameters(t))},normalizeUrl:function(e){var t=OAuth.SignatureMethod.parseUri(e),n=t.protocol.toLowerCase(),r=t.authority.toLowerCase(),i="http"==n&&80==t.port||"https"==n&&443==t.port;if(i){var a=r.lastIndexOf(":");a>=0&&(r=r.substring(0,a))}var o=t.path;return o||(o="/"),n+"://"+r+o},parseUri:function(e){for(var t={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=t.parser.strict.exec(e),r={},i=14;i--;)r[t.key[i]]=n[i]||"";return r},normalizeParameters:function(e){if(null==e)return"";for(var t=OAuth.getParameterList(e),n=[],r=0;r<t.length;++r){var i=t[r];"oauth_signature"!=i[0]&&n.push([OAuth.percentEncode(i[0])+" "+OAuth.percentEncode(i[1]),i])}n.sort(function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0});for(var a=[],o=0;o<n.length;++o)a.push(n[o][1]);return OAuth.formEncode(a)}}),OAuth.SignatureMethod.registerMethodClass(["PLAINTEXT","PLAINTEXT-Accessor"],OAuth.SignatureMethod.makeSubclass(function(){return this.key})),OAuth.SignatureMethod.registerMethodClass(["HMAC-SHA1","HMAC-SHA1-Accessor"],OAuth.SignatureMethod.makeSubclass(function(e){b64pad="=";var t=b64_hmac_sha1(this.key,e);return t}));try{OAuth.correctTimestampFromSrc()}catch(e){}var OAuthAdapter=function(e,t,n){function r(){I||(I=!0,v.value=0,k=O?"tokenRequest":"pageLoad",D[k]||(D[k]=O?2e3:1e3),O=!1,b=(new Date).getTime(),E=setInterval(i,30),T&&T.hide(),v&&v.show(),A&&A.show())}function i(){v&&(v.value=((new Date).getTime()-b)/D[k])}function a(e){if(-1!==e.url.indexOf("linkedin")){var t=e.source.evalJS('(p = document.getElementsByClassName("access-code")) && p[0].innerHTML');t?(l=t,P(),w()):(v&&v.hide(),A&&A.hide(),T&&T.show()),I=!1,clearInterval(E),D[k]=(new Date).getTime()-b,Ti.App.Properties.setString("Social-LoadingEstimates",JSON.stringify(D))}else if(-1!==e.url.indexOf("twitter")){var t=e.source.evalJS('(p = document.getElementById("oauth_pin")) && p.innerHTML;');t?(l=t.split("<code>")[1].split("</code>")[0],P(),w()):(v&&v.hide(),A&&A.hide(),T&&T.show()),I=!1,clearInterval(E),D[k]=(new Date).getTime()-b,Ti.App.Properties.setString("Social-LoadingEstimates",JSON.stringify(D))}}var o=e,s=t,u=n,l=null,c=null,d=null,h=null,f=null,m={consumerSecret:o,tokenSecret:""},g=null,_=null,T=null,v=null,A=null,w=null,y={};this.sendTwitterImage=function(e){var t="http://upload.twitter.com/1/statuses/update_with_media.json",n=(e.title,e.onSuccess),r=e.onError;if(null==h||null==f)return void Ti.API.debug("The send status cannot be processed as the client doesn't have an access token. Authorize before trying to send.");m.tokenSecret=f;var i=S(t);i.parameters.push(["oauth_token",h]),i.parameters.push(["oauth_timestamp",OAuth.timestamp()]),i.parameters.push(["oauth_nonce",OAuth.nonce(42)]),i.parameters.push(["oauth_version","1.0"]),OAuth.SignatureMethod.sign(i,m);OAuth.getParameterMap(i.parameters);client=Ti.Network.createHTTPClient({onload:function(){200==client.status?(Ti.API.info("1"+this.responseText),n&&n(this.responseText)):r&&r(this.responseText)},onerror:function(){Ti.API.error("Social.js: FAILED to send a request!"),Ti.API.error(this.responseText),r&&r(this.responseText)}}),client.open("POST",t),header=OAuth.getAuthorizationHeader(t,i.parameters),client.setRequestHeader("Authorization",header),Ti.Android||client.setRequestHeader("Content-Type","multipart/form-data"),client.send(e.params)},this.loadAccessToken=function(e){var t;if(y[e])t=y[e];else{var n=Ti.App.Properties.getString("Social.js-AccessToken-"+e,"");if(!n)return;try{t=y[e]=JSON.parse(n)}catch(r){return Ti.API.error("Failed to parse stored access token for "+e+"!"),void Ti.API.error(r)}}t.accessToken&&(h=t.accessToken),t.accessTokenSecret&&(f=t.accessTokenSecret)},this.saveAccessToken=function(e){y[e]={accessToken:h,accessTokenSecret:f},Ti.App.Properties.setString("Social.js-AccessToken-"+e,JSON.stringify(y[e]))},this.clearAccessToken=function(e){delete y[e],Ti.App.Properties.setString("Social.js-AccessToken-"+e,null),h=null,f=null},this.isAuthorized=function(){return null!=h&&null!=f};var S=function(e){var t={action:e,method:"POST",parameters:[]};return t.parameters.push(["oauth_consumer_key",s]),t.parameters.push(["oauth_signature_method",u]),t};this.getPin=function(){return l},this.getRequestToken=function(e,t){m.tokenSecret="";var n=S(e);OAuth.setTimestampAndNonce(n),OAuth.SignatureMethod.sign(n,m);var r=!1,i=Ti.Network.createHTTPClient({onload:function(){Ti.API.info("0"+this.responseText);var e=OAuth.getParameterMap(this.responseText);c=e.oauth_token,d=e.oauth_token_secret,t({success:!0,token:this.responseText}),r=!0},onerror:function(){Ti.API.error("Social.js: FAILED to getRequestToken!"),Ti.API.error(this.responseText),t({success:!1}),r=!0}});i.open("POST",e),i.send(OAuth.getParameterMap(n.parameters))};var k,b,P=function(){if(null!=g)try{Ti.App.fireEvent("login_closed",{what:"linkedin"}),T.removeEventListener("load",a),T.removeEventListener("beforeload",r),v.hide(),g.close(),I=null,T=null,v=null,I=!1,O=!0,_=null,g=null}catch(e){Ti.API.debug("Cannot destroy the authorize UI. Ignoring.")}},O=!0,I=!1,D=JSON.parse(Ti.App.Properties.getString("Social-LoadingEstimates","{}")),E=0;this.showLoadingUI=function(){g=Ti.UI.createWindow({backgroundColor:"white",width:"100%",height:"100%",zIndex:1e3}),Ti.Android||(g.opacity=0,g.transform=Ti.UI.create2DMatrix().scale(0)),_=Ti.UI.createView({top:0,left:0}),g.addEventListener("androidback",function(){Ti.App.fireEvent("login_closed",{what:"linkedin"}),g.close()});var e=Ti.UI.createButton({font:{fontSize:11,fontWeight:"bold"},backgroundColor:"#52D3FE",borderColor:"#52D3FE",color:"#fff",style:0,borderRadius:6,title:"X",top:20,right:5,width:30,height:30});e.addEventListener("click",P),g.open();var t=0;if(Ti.Android&&(t="10dp"),A=Ti.UI.createView({top:t,right:t,bottom:t,left:t,backgroundColor:"#fff"}),v=Ti.UI.createProgressBar({top:10,right:10,bottom:10,left:10,min:0,max:1,value:.5,message:"Loading, please wait.",backgroundColor:"#fff",font:{fontSize:14,fontWeight:"bold"},style:0}),_.add(A),A.add(v),v.show(),g.add(_),!Ti.Android){var n=Ti.UI.createAnimation({transform:Ti.UI.create2DMatrix().scale(1.1),opacity:1,duration:350}),i=Ti.UI.createAnimation({transform:Ti.UI.create2DMatrix(),duration:400});n.addEventListener("complete",function(){g.animate(i)}),g.animate(n)}r()},this.showAuthorizeUI=function(e,t){w=t;var n=0;Ti.Android&&(n="10dp"),T=Ti.UI.createWebView({url:e,width:"100%",height:"100%",autoDetect:[Ti.UI.AUTODETECT_NONE]}),T.addEventListener("beforeload",r),T.addEventListener("load",a),_.add(T)},this.getAccessToken=function(e,t){m.tokenSecret=d;var n=S(e);n.parameters.push(["oauth_token",c]),n.parameters.push(["oauth_verifier",l]),OAuth.setTimestampAndNonce(n),OAuth.SignatureMethod.sign(n,m);var r=OAuth.getParameterMap(n.parameters),i=Ti.Network.createHTTPClient({onload:function(){var e=OAuth.getParameterMap(this.responseText);Ti.API.info(e.oauth_token),Ti.API.info(e.oauth_token_secret),h=e.oauth_token,f=e.oauth_token_secret,t({success:!0})},onerror:function(){Ti.API.error("Social.js: FAILED to getAccessToken!"),Ti.API.error(this.responseText),t({success:!1})}});i.open("POST",e),i.send(r)},this.getProfileLinkedin=function(e){Ti.API.info("token: "+h+" secret: "+f);var t="http://api.linkedin.com/v1/people/~:(first-name,last-name,headline,picture-urls::(original))?format=json",n=(e.onSuccess,e.onError);m.tokenSecret=f;var r=S(t);r.method="get",r.parameters.push(["oauth_nonce",OAuth.nonce(42)]),r.parameters.push(["oauth_timestamp",OAuth.timestamp()]),r.parameters.push(["oauth_token",h]),r.parameters.push(["oauth_version","1.0"]),OAuth.SignatureMethod.sign(r,m);OAuth.getParameterMap(r.parameters);Ti.API.info(JSON.stringify(r)),client=Ti.Network.createHTTPClient({onload:function(){if(200==client.status){var e=JSON.parse(this.responseText);Titanium.Network.removeAllHTTPCookies(),Titanium.Network.removeAllSystemCookies(),Ti.App.Properties.setString("first_name",e.firstName),Ti.App.Properties.setString("last_name",e.lastName),Ti.App.Properties.setString("mail",""),Ti.App.Properties.setString("id",""),Ti.App.Properties.setString("login_type","linkedin"),Ti.App.Properties.setString("picture",e.pictureUrls.values[0]),Ti.API.info(e),Ti.App.fireEvent("goto_page",{page:2}),saveHer.stopExecution=!1}else{Ti.API.info("Error Message");{Ti.UI.createAlertDialog({message:"C'è stato un errore nell'elaborazione della richiesta. Riprova per favore.",ok:"Ok",title:"Linkedin"}).show()}}},onerror:function(){Ti.API.error("Social.js: FAILED to send a request!"),Ti.API.error(this.responseText),n&&n(this.responseText)}}),client.open("GET",t),header=OAuth.getAuthorizationHeader("",r.parameters),client.setRequestHeader("Authorization",header),client.send()},this.shareLinkedin=function(e){var t="http://api.linkedin.com/v1/people/~/shares",n=e.onSuccess,r=e.onError;m.tokenSecret=f;var i=S(t);i.parameters.push(["oauth_nonce",OAuth.nonce(42)]),i.parameters.push(["oauth_timestamp",OAuth.timestamp()]),i.parameters.push(["oauth_token",h]),i.parameters.push(["oauth_version","1.0"]),OAuth.SignatureMethod.sign(i,m),client=Ti.Network.createHTTPClient({onload:function(){200==client.status||201==client.status?(Ti.API.info("3"+this.responseText),n&&n(this.responseText)):r&&r(this.responseText)},onerror:function(){Ti.API.error("Social.js: FAILED to send a request!"),Ti.API.error(this.responseText),r&&r(this.responseText)}}),client.open("POST",t),header=OAuth.getAuthorizationHeader("",i.parameters),client.setRequestHeader("Content-Type","application/json"),client.setRequestHeader("x-li-format","json"),client.setRequestHeader("Authorization",header);var a=JSON.stringify(e.parameters);client.send(a)},this.send=function(e){var t=e.url,n=e.parameters,r=(e.title,e.onSuccess),i=e.onError;if(null==h||null==f)return void Ti.API.debug("The send status cannot be processed as the client doesn't have an access token. Authorize before trying to send.");m.tokenSecret=f;var a=S(t);a.parameters.push(["oauth_token",h]);for(p in n)a.parameters.push(n[p]);OAuth.setTimestampAndNonce(a),OAuth.SignatureMethod.sign(a,m);var o=OAuth.getParameterMap(a.parameters),s=Ti.Network.createHTTPClient({onload:function(){Ti.API.info("4"+this.responseText),200==s.status?r&&r(this.responseText):i&&i(this.responseText)},onerror:function(){Ti.API.info(this.responseText),Ti.API.error("Social.js: FAILED to send a request!"),i&&i(this.responseText)}});s.open("POST",t),s.send(o)}},supportedSites={twitter:{accessToken:"https://api.twitter.com/oauth/access_token",requestToken:"https://api.twitter.com/oauth/request_token",authorize:"https://api.twitter.com/oauth/authorize?",update:"https://api.twitter.com/1.1/statuses/update.json"},linkedin:{accessToken:"https://api.linkedin.com/uas/oauth/accessToken",requestToken:"https://api.linkedin.com/uas/oauth/requestToken?scope=rw_nus",authorize:"https://api.linkedin.com/uas/oauth/authorize?",update:"http://api.linkedin.com/v1/people/~/shares?format=json"}};exports.create=function(e){var t=(e.site||"twitter").toLowerCase(),n=new OAuthAdapter(e.consumerSecret,e.consumerKey,"HMAC-SHA1");n.loadAccessToken(t);var r=supportedSites[t];return null==r?(alert("The Social.js module does not support "+t+" yet!"),null):{isAuthorized:function(){return n.isAuthorized()},deauthorize:function(){n.clearAccessToken(t)},authorize:function(e){function i(){n.getAccessToken(r.accessToken,function(r){Ti.API.info("Evt"+JSON.stringify(r)),r.success?(n.saveAccessToken(t),e&&e()):alert("Did not get access token now!")})}n.isAuthorized()?e&&e():(n.showLoadingUI(),n.getRequestToken(r.requestToken,function(e){e.success?n.showAuthorizeUI(r.authorize+e.token,i):alert("Did not get access token now!")}))},shareImage:function(e){this.authorize(function(){n.sendTwitterImage({params:{media:e.image,status:e.message},title:"Twitter",onSuccess:e.success,onError:e.error})})},share:function(e){this.authorize(function(){n.send({url:r.update,parameters:[["status",e.message]],title:"Twitter",onSuccess:e.success,onError:e.error})})},shareToLinkedin:function(e){this.authorize(function(){n.shareLinkedin({site:"linkedin",url:r.update,parameters:e.message,title:"Linkedin",onSuccess:e.success,onError:e.error})})},getProfileLinkedin:function(e){this.authorize(function(){n.getProfileLinkedin({site:"linkedin",url:r.update,parameters:e.message,title:"Linkedin",onSuccess:e.success,onError:e.error})})}}};