function Location(){var e=require("external/moment"),t={};t.isGPSRunning=!1,Ti.Geolocation.Android.manualMode=!0;var i=new Date;t.hasGPSDone=!1;var a=-1;gpsProvider=Ti.Geolocation.Android.createLocationProvider({name:Ti.Geolocation.PROVIDER_GPS,minUpdateTime:60,minUpdateDistance:150}),Ti.Geolocation.Android.addLocationProvider(gpsProvider);var o=(Ti.UI.createAlertDialog({message:"",ok:"Ok",title:"saveHer"}),function(r){t.isGPSRunning=!0;try{if(r.success&&"undefined"!=typeof r.coords.latitude&&"undefined"!=typeof r.coords.longitude){if(a=e(i).diff(new Date(r.coords.timestamp),"minute"),3>=a&&r.coords.accuracy<150){{r.coords.latitude,r.coords.longitude}Ti.App.fireEvent("gps_event",{accuracy:r.coords.accuracy,latitude:r.coords.latitude,longitude:r.coords.longitude,timestamp:!0}),Ti.API.info("Location is "+r.coords.latitude+","+r.coords.longitude),t.isGPSRunning=!1,Titanium.Geolocation.removeEventListener("location",o),t.hasGPSDone=!0}Ti.API.info(r.coords.latitude+","+r.coords.longitude),Ti.API.info("Now is "+i),Ti.API.info("From coords "+new Date(r.coords.timestamp))}}catch(n){Ti.App.fireEvent("disable_gps",{})}});return t.startGPS=function(){Titanium.Geolocation.getLocationServicesEnabled()?(t.gpsEnabled=!0,Ti.API.info("gpsenabled"),Ti.Geolocation.addEventListener("location",o)):(t.gpsEnabled=!1,Ti.API.info("gpsdisabled"))},t.getGPSRunning=function(){return t.isGPSRunning},t.removeGPSEvent=function(){Titanium.Geolocation.removeEventListener("location",o),Ti.API.info("removeGPSEvent")},t}module.exports=Location;